\chapter{Proposta de Solução}
\label{cap:PropostaSol}
A partir da análise do funcionamento do sensor Kinect, do Blender, dos \textit{SDKs} disponíveis para desenvolvimento de aplicações para Kinect e de aplicações já existentes que realizam a integração entre Kinect e Blender, optou-se pelo desenvolvimento de uma aplicação de integração entre Kinect e Blender. Na Seção 6.1 tem-se as características da solução a ser desenvolvida, assim como a arquitetura da aplicação. Já na Seção 6.2 tem-se a descrição da animação a ser gerada através da captura de movimentos pela aplicação desenvolvida.

\section{Características da Aplicação}
Neste trabalho será desenvolvido um \textit{addon} para o Blender que permita realizar a integração direta com o sensor Kinect. A partir dessa pretende-se que o uso do sensor auxilie na animação de um personagem 3D, tornando o processo menos custoso e gerando uma animação com movimentos mais naturais.

O desenvolvimento será feito na linguagem de programação Python utilizando-se o \textit{framework} OpenNI. A integração direta torna-se possível com a ligação do \textit{SDK} através dos \textit{Python Bindings}, não sendo necessária a criação de uma aplicação intermediária para o processamento das informações coletadas pelo Kinect e transmiti-las através de um protocolo OSC, como é feito pelo Ni Mate.

A utilização do OpenNI dá-se pelo fato do \textit{framework} ser multiplataforma e possuir código aberto, assim como o Blender, não restringindo o \textit{software} a somente um sistema operacional. O NiTE será utilizado como \textit{middleware} de apoio, devido suas facilidades para o processamento do esqueleto do usuário.

A interface gráfica da aplicação será desenvolvida dentro do \textit{addon}, incorporando toda a solução ao Blender, permitindo que o usuário configure o esqueleto, o tipo de animação (pose a pose ou em linha reta), método de utilização de NUI (mímica de movimentos ou gestos), dentre outras funcionalidades.

Através do uso dos \textit{Python Bindings}, a aplicação irá se comunicar com o OpenNI e com o NiTE, já que esses são os responsáveis pelo tratamento das informações coletadas pelo sensor Kinect.

Na Figura \ref{fig:arquitetura} tem-se a arquitetura da aplicação a ser desenvolvida neste trabalho. Conforme pode-se observar, o \textit{addon} Kinected Blender funcionará juntamente com o Blender e irá se comunicar com o OpenNI e o NiTE através de \textit{Python Bindings}. Já o OpenNI fará a comunicação com o sensor Kinect através do \textit{driver} do dispositivo, sendo que esse é o único \textit{driver} que não está embutido no OpenNI. No sistema operacional Windows será necessária a utilização do \textit{driver} oficial do Kinect, disponibilizado pela Microsoft, conforme especificação do OpenNI. Já em sistemas Linux deverá ser utilizado um \textit{driver} não-oficial do sensor devido a ausência de um \textit{driver} oficial para essa plataforma. Como exemplo de \textit{driver} não-oficial para Linux pode-se citar o \textit{libfreenect}. Por fim, será utilizado o sensor \textit{Kinect for Xbox 360} para os testes da aplicação, devido ao fato de ser o único sensor disponível para testes. 

\begin{figure}[htbp]
 \centering
 \includegraphics[height=200px]{imagens/arquitetura.png}
 \caption{Arquitetura da aplicação Kinected Blender.}
 \label{fig:arquitetura}
\end{figure}

\section{Animação}
Após o desenvolvimento da aplicação, será gerada uma simples animação de um personagem 3D no Blender, através dos movimentos realizados pelo usuário. A animação consiste em fazer com que um cachorro, que ande sobre duas patas (de forma similar ao ser humano), dance na tela. Não serão utilizados modelos prontos, sendo que esse cachorro e seu \textit{armature} serão modelados manualmente no Blender. Na Figura \ref{fig:esboco} tem-se um esboço do cachorro que será utilizado na animação, sendo que o mesmo será remodelado com uma técnica que utiliza menos polígonos. Através da animação desse modelo serão verificadas as limitações relativas à captura de movimentos, verificando-se possíveis soluções para essas limitações.
\newpage
\begin{figure}[htbp]
 \centering
 \includegraphics[height=200px]{imagens/esboco.png}
 \caption{Esboço do modelo 3D a ser utilizado na animação.}
 \label{fig:esboco}
\end{figure}